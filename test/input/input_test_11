// All transactions proceed once sites recover and commit
begin(T1)
beginRO(T2)
begin(T3)
fail(2)
W(T1, x1, 100)
W(T3, x1, 1000)
R(T2, x1)
querystate()
recover(2)
end(T1)
querystate()
end(T3)
end(T2)