# Test 19
# An almost circular deadlock scenario with failures.
# T3 fails (T2 and T4 do not fail because the site is up when they execute)
# because site 4 fails.
# All others succeed.
begin(T1)

begin(T2)

begin(T3)

begin(T4)

begin(T5)

R(T3,x3)
T3 - x3: 30

fail(4)

recover(4)

R(T4,x4)
T4 - x4: 40

R(T5,x5)
{'T1': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 1, 'locks': {}, 'failed': False}, 'T2': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 2, 'locks': {}, 'failed': False}, 'T3': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 3, 'locks': {}, 'failed': True}, 'T4': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 4, 'locks': {'x4': {'1': {'firstGrant': 9, 'lockType': <LockType.SHARED: 1>}}}, 'failed': False}, 'T5': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 5, 'locks': {}, 'failed': False}}
defaultdict(<class 'list'>, {'T1': [' '], 'T2': [' '], 'T3': [' '], 'T4': [' '], 'x4.1': ['T4'], 'T5': [' ']})
Cycle? False
T5 - x5: 50

R(T1,x6)
T1 - x6: 60

R(T2,x2)
T2 - x2: 20

W(T1,x2,10)

querystate()

=============================System State=============================
Current Time = 13

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 
Write x2: 10
Pending Sites: ['1'] 
Written Sites: ['2', '3', '4', '5', '6', '7', '8', '9', '10']

Transaction: T2
Read Only: False
Start Time: 2
Aborted: False
Locks:
	x2: 1:SHARED:12
Pending Operation: 

Transaction: T3
Read Only: False
Start Time: 3
Aborted: True
Locks:
	
Pending Operation: 

Transaction: T4
Read Only: False
Start Time: 4
Aborted: False
Locks:
	x4: 1:SHARED:9
Pending Operation: 

Transaction: T5
Read Only: False
Start Time: 5
Aborted: False
Locks:
	x5: 6:SHARED:10
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T2:SHARED
	x4: T4:SHARED
	x6: T1:SHARED
Waiting Locks:
	x2: T1:EXCLUSIVE
All Data:
	x2: :20:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x5: T5:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
W(T2,x3,20)

querystate()

=============================System State=============================
Current Time = 14

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 
Write x2: 10
Pending Sites: ['1'] 
Written Sites: ['2', '3', '4', '5', '6', '7', '8', '9', '10']

Transaction: T2
Read Only: False
Start Time: 2
Aborted: False
Locks:
	x2: 1:SHARED:12
	x3: 4:EXCLUSIVE:14
Pending Operation: 

Transaction: T3
Read Only: False
Start Time: 3
Aborted: True
Locks:
	
Pending Operation: 

Transaction: T4
Read Only: False
Start Time: 4
Aborted: False
Locks:
	x4: 1:SHARED:9
Pending Operation: 

Transaction: T5
Read Only: False
Start Time: 5
Aborted: False
Locks:
	x5: 6:SHARED:10
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T2:SHARED
	x4: T4:SHARED
	x6: T1:SHARED
Waiting Locks:
	x2: T1:EXCLUSIVE
All Data:
	x2: :20:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x3: T2:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0 T2:20:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x5: T5:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
W(T3,x4,30)

querystate()

=============================System State=============================
Current Time = 15

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 
Write x2: 10
Pending Sites: ['1'] 
Written Sites: ['2', '3', '4', '5', '6', '7', '8', '9', '10']

Transaction: T2
Read Only: False
Start Time: 2
Aborted: False
Locks:
	x2: 1:SHARED:12
	x3: 4:EXCLUSIVE:14
Pending Operation: 

Transaction: T3
Read Only: False
Start Time: 3
Aborted: True
Locks:
	
Pending Operation: 

Transaction: T4
Read Only: False
Start Time: 4
Aborted: False
Locks:
	x4: 1:SHARED:9
Pending Operation: 

Transaction: T5
Read Only: False
Start Time: 5
Aborted: False
Locks:
	x5: 6:SHARED:10
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T2:SHARED
	x4: T4:SHARED
	x6: T1:SHARED
Waiting Locks:
	x2: T1:EXCLUSIVE
All Data:
	x2: :20:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x3: T2:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0 T2:20:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x5: T5:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
W(T5,x1,50)

querystate()

=============================System State=============================
Current Time = 16

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 
Write x2: 10
Pending Sites: ['1'] 
Written Sites: ['2', '3', '4', '5', '6', '7', '8', '9', '10']

Transaction: T2
Read Only: False
Start Time: 2
Aborted: False
Locks:
	x2: 1:SHARED:12
	x3: 4:EXCLUSIVE:14
Pending Operation: 

Transaction: T3
Read Only: False
Start Time: 3
Aborted: True
Locks:
	
Pending Operation: 

Transaction: T4
Read Only: False
Start Time: 4
Aborted: False
Locks:
	x4: 1:SHARED:9
Pending Operation: 

Transaction: T5
Read Only: False
Start Time: 5
Aborted: False
Locks:
	x5: 6:SHARED:10
	x1: 2:EXCLUSIVE:16
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T2:SHARED
	x4: T4:SHARED
	x6: T1:SHARED
Waiting Locks:
	x2: T1:EXCLUSIVE
All Data:
	x2: :20:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x1: T5:EXCLUSIVE
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0 T5:50:-1
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x3: T2:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0 T2:20:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x5: T5:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
end(T5)
T5 commits

W(T4,x5,40)

querystate()

=============================System State=============================
Current Time = 18

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 
Write x2: 10
Pending Sites: ['1'] 
Written Sites: ['2', '3', '4', '5', '6', '7', '8', '9', '10']

Transaction: T2
Read Only: False
Start Time: 2
Aborted: False
Locks:
	x2: 1:SHARED:12
	x3: 4:EXCLUSIVE:14
Pending Operation: 

Transaction: T3
Read Only: False
Start Time: 3
Aborted: True
Locks:
	
Pending Operation: 

Transaction: T4
Read Only: False
Start Time: 4
Aborted: False
Locks:
	x4: 1:SHARED:9
	x5: 6:EXCLUSIVE:18
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T2:SHARED
	x4: T4:SHARED
	x6: T1:SHARED
Waiting Locks:
	x2: T1:EXCLUSIVE
All Data:
	x2: :20:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0 T5:50:17
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x3: T2:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0 T2:20:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x5: T4:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0 T4:40:-1
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
end(T4)
T4 commits

end(T3)
{'T1': {'readOnly': False, 'pendingOperation': {'operation': <Operation.WRITE: 2>, 'options': {'key': 'x2', 'value': '10', 'pendingSites': [<Site.Site object at 0x7ff5736cd2e8>], 'writtenSites': ['2', '3', '4', '5', '6', '7', '8', '9', '10']}}, 'startTime': 1, 'locks': {'x6': {'1': {'firstGrant': 11, 'lockType': <LockType.SHARED: 1>}}, 'x2': {'1': {}, '2': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '3': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '4': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '5': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '6': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '7': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '8': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '9': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}, '10': {'firstGrant': 13, 'lockType': <LockType.EXCLUSIVE: 2>}}}, 'failed': False}, 'T2': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 2, 'locks': {'x2': {'1': {'firstGrant': 12, 'lockType': <LockType.SHARED: 1>}}, 'x3': {'4': {'firstGrant': 14, 'lockType': <LockType.EXCLUSIVE: 2>}}}, 'failed': False}, 'T3': {'readOnly': False, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 3, 'locks': {}, 'failed': True}}
defaultdict(<class 'list'>, {'T1': [' ', 'x2.1'], 'x6.1': ['T1'], 'x2.1': [' ', 'T2'], 'x2.2': ['T1'], 'x2.3': ['T1'], 'x2.4': ['T1'], 'x2.5': ['T1'], 'x2.6': ['T1'], 'x2.7': ['T1'], 'x2.8': ['T1'], 'x2.9': ['T1'], 'x2.10': ['T1'], 'T2': [' '], 'x3.4': ['T2'], 'T3': [' ']})
Cycle? False
T3 aborts

end(T2)
T2 commits

querystate()

=============================System State=============================
Current Time = 21

=========================Current Transactions=========================
Transaction: T1
Read Only: False
Start Time: 1
Aborted: False
Locks:
	x6: 1:SHARED:11
	x2: 1:EXCLUSIVE:21   2:EXCLUSIVE:13   3:EXCLUSIVE:13   4:EXCLUSIVE:13   5:EXCLUSIVE:13   6:EXCLUSIVE:13   7:EXCLUSIVE:13   8:EXCLUSIVE:13   9:EXCLUSIVE:13   10:EXCLUSIVE:13
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
	x6: T1:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0 T5:50:17
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x3: :30:0 T2:20:21
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x5: :50:0 T4:40:19
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	x2: T1:EXCLUSIVE
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:-1
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
end(T1)
T1 commits


=============================System State=============================
Current Time = 22

=========================Current Transactions=========================
======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x1: :10:0 T5:50:17
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 8
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x3: :30:0 T2:20:21
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x5: :50:0 T4:40:19
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:22
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
