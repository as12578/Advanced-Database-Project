# Test 18
# A circular deadlock scenario
# T5 as the youngest will abort, allowing T4 to complete, then T3, T2, and T1.
# Only T5s write will not succeed. All others will succeed
begin(T1)

begin(T2)

begin(T3)

begin(T4)

begin(T5)

R(T3,x3)
T3 - x3: 30

R(T4,x4)
T4 - x4: 40

R(T5,x5)
T5 - x5: 50

R(T1,x1)
T1 - x1: 10

R(T2,x2)
T2 - x2: 20

W(T1,x2,10)

W(T2,x3,20)

W(T3,x4,30)

W(T4,x5,40)

W(T5,x1,50)

end(T4)
T4 commits

end(T3)
T3 commits

end(T2)
T2 commits

end(T1)
T1 commits


=============================System State=============================
Current Time = 19

=========================Current Transactions=========================
Transaction: T5
Read Only: False
Start Time: 5
Aborted: False
Locks:
	x5: 6:SHARED:8
	x1: 2:EXCLUSIVE:19
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 2
Start Time: 0
Available: True
Stable: True
Granted Locks:
	x1: T5:EXCLUSIVE
Waiting Locks:
	
All Data:
	x1: :10:0 T5:50:-1
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 3
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 4
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x3: :30:0 T2:20:18
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 5
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 6
Start Time: 0
Available: True
Stable: True
Granted Locks:
	x5: T5:SHARED
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 7
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 8
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 9
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations: 

Site: 10
Start Time: 0
Available: True
Stable: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:10:19
	x4: :40:0 T3:30:17
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations: 

======================================================================
======================================================================
