# Read-only txn read replicated data from site which have committed data since it started?
begin(T1)

begin(T3)

fail(1)

# Write to sites 2-10
W(T1, x2, 100)

# Commit
end(T1)
T1 commits

beginRO(T2)

recover(1)

# Write to all sites
W(T3, x2, 200)

# commit
end(T3)
T3 commits

# Allow read from site 1?
R(T2, x2)
{'T2': {'readOnly': True, 'pendingOperation': {'operation': <Operation.NONE: 0>, 'options': {}}, 'startTime': 6, 'locks': {}, 'failed': False}}
defaultdict(<class 'list'>, {'T2': [' ']})
Cycle? False
Site 1: replicated key: True, last commit on site: 9, site start time: 7, Transaction start time: 6
T2 - x2: 20

# Should Read only transactions be allowed to read from sites which haven't committed a value after they started and before the read only transaction began?

=============================System State=============================
Current Time = 10

=========================Current Transactions=========================
Transaction: T2
Read Only: True
Start Time: 6
Aborted: False
Locks:
	
Pending Operation: 

======================================================================

============================All Site State============================
Site: 1
Start Time: 7
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 2
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x1: :10:0
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x11: :110:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 3
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 4
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x3: :30:0
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x13: :130:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 5
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 6
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x5: :50:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x15: :150:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 7
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 8
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x7: :70:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x17: :170:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 9
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x20: :200:0
Pending Operations:


Site: 10
Start Time: 0
Available: True
Granted Locks:
	
Waiting Locks:
	
All Data:
	x2: :20:0 T1:100:5 T3:200:9
	x4: :40:0
	x6: :60:0
	x8: :80:0
	x9: :90:0
	x10: :100:0
	x12: :120:0
	x14: :140:0
	x16: :160:0
	x18: :180:0
	x19: :190:0
	x20: :200:0
Pending Operations:


======================================================================
======================================================================
